<app-nav></app-nav>
  <article id="productos_div" class="container" >
    <div class="card">
        <div class="card-header">
          <h2 class="text-center">Formulario de Registro</h2>
        </div>
        <form [formGroup]="productoForm" (ngSubmit)="onSubmit()" class="row g-3">
          <div class="col-md-6">
            <label for="nombre" class="form-label">Nombre</label>
            <input type="text" class="form-control" id="nombre" formControlName="nombre">
            <div *ngIf="productoForm.get('nombre')?.invalid && productoForm.get('nombre')?.touched">
              <small class="text-danger">El nombre es obligatorio.</small>
            </div>
          </div>
          <div class="col-md-6">
            <label for="descripcion" class="form-label">Descripción</label>
            <input type="text" class="form-control" id="descripcion" formControlName="descripcion">
            <div *ngIf="productoForm.get('descripcion')?.invalid && productoForm.get('descripcion')?.touched">
              <small class="text-danger">La descripción es obligatoria.</small>
            </div>
          </div>
          <div class="col-md-3">
            <label for="valor" class="form-label">Valor</label>
            <input type="text" class="form-control" id="valor" formControlName="valor">
            <div *ngIf="productoForm.get('valor')?.invalid && productoForm.get('valor')?.touched">
              <small class="text-danger">El valor es obligatorio.</small>
            </div>
          </div>
          <div class="col-md-9">
            <label for="img_path" class="form-label">Ruta img</label>
            <input type="text" class="form-control" id="img" formControlName="img">
            <div *ngIf="productoForm.get('img')?.invalid && productoForm.get('img')?.touched">
              <small class="text-danger">La ruta de la imagen es obligatoria.</small>
            </div>
          </div>
          <div class="card-footer">
            <div class="col-6">
              <!-- <button type="submit" class="btn btn-success" [disabled]="productoForm.invalid">Registrar</button> -->
              <button *ngIf="productoForm.valid && !modificar" type="submit" class="btn btn-success">Guardar</button>
              <button *ngIf="modificar" type="submit" class="btn btn-outline-info">Actualizar</button>


            </div>
            <div class="col-6">
              <button type="button" (click)="limpiarFormularioProducto()" class="btn btn-outline-warning">Limpiar Formulario</button>
            </div>
          </div>
        </form>
      </div>
      
    <br><hr>
    <div class="card">
        <div class="card-header">
            <h2>Productos</h2>
        </div> 
        <div class="card-body table-responsive">
            <table id="productos_adm_table" class="display" style="width:100%">
                <thead>
                    <tr>
                        <th>ID</th>
                        <th>Nombre</th>
                        <th>Descripción</th>
                        <th>Precio</th>
                        <th>Accion</th>

                    </tr>
                </thead>
                <tbody>
                    <tr *ngFor="let producto of productos">
                        <th scope="row">{{producto.id}}</th>
                        <td>{{producto.nombre}}</td>
                        <td>{{producto.descripcion}}</td>
                        <td>{{formatNumberToCurrency(producto.valor)}}</td>
                        <td><button class="btn btn-outline-success" (click)="mostrarProducto(producto.id)" > Ver</button></td>
                    </tr>

                </tbody>

            </table>

        </div>
        <!-- <div class="card-footer">

        </div> -->
    </div>
</article>
